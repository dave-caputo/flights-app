{% extends "home/home_page.html" %}

{% load data_extras %}
{% load wagtailcore_tags %}

{% block flight_type %}
  <h2><strong>{{ airport|title }} {{ operation|title }}</strong></h2>
  <a href="/"><p>Back</p></a>
{% endblock %}

{% block flights_list %}
  {% if operation == 'arrivals' %}
    <table class="table table-striped table-bordered" id="arrivals_table" cellspacing="0" width="100%">
      <thead>
        <tr>
          <th class="ident">Flight</th>
          <th class="airline">Airline</th>
          <th class="origin">From</th>
          <th class="terminal">Terminal</th>
          <th class="destination">Destination</th>
          <th class="flightstatus">Status</th>
          <th class="actualdeparturetime">Arrival time</th>
          <th class="scheduled">Scheduled</th>
        </tr>
      </thead>
      <tbody>
        {% for flight in flights.data %}
          <tr>
            <td class="ident"><a href="#" target="_blank">{{ flight.flightNumber }}</a></td>
            <td class="airline">{{ flight.airlineName }}</td>
            <td class="origin">{{ flight.city }}</td>
            <td class="terminal">{{ flight.terminalId }}</td>
            <td class="destination">{{ airport|title }}</td>
            <td class="flightstatus">{{ flight.flightOutputStatus }}</td>
            <!-- <td class="flightstatus">{{ flight.flightStatusText }}</td> -->
            <td class="timesort">{{ flight.flightStatusTime }}</td>
            <td class="scheduled">{{ flight.scheduledTimestamp }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% elif operation == 'departures' %}
    <table class="table table-striped table-bordered" id="departures_table" cellspacing="0" width="100%">
      <thead>
        <tr>
          <th class="ident">Flight</th>
          <th class="airline">Airline</th>
          <th class="origin">From</th>
          <th class="terminal">Terminal</th>
          <th class="destination">Destination</th>
          <th class="flightstatus">Status</th>
          <th class="actualdeparturetime">Departure time</th>
        </tr>
      </thead>
      <tbody>
        {% for flight in flights.data %}
          <tr>
            <td class="ident"><a href="#" target="_blank">{{ flight.flightNumber }}</a></td>
            <td class="airline">{{ flight.airlineName }}</td>
            <td class="origin">{{ airport|title }}</td>
            <td class="terminal">{{ flight.terminalId }}</td>
            <td class="destination">{{ flight.city }}</td>
            <td class="flightstatus">{{ flight.flightStatusText }}</td>
            <td class="timesort">{{ flight.flightStatusTime }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% endif %}
{% endblock %}

{% block extra_js %}
  <script type="text/javascript">
    $('#arrivals_table').DataTable({
      'order': []
    });
    $('#departures_table').DataTable();
  </script>
{% endblock %}
