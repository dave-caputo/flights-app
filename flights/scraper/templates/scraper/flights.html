{% extends "home/home_page.html" %}

{% load data_extras %}
{% load wagtailcore_tags %}

{% block flight_type %}
  <h2><strong>{{ airport|title }} {{ operation|title }}</strong></h2>
  <a href="/"><p>Back</p></a>
{% endblock %}

{% block flights_list %}
  {% if operation == 'arrivals' %}
    <table class="table table-striped table-bordered" id="arrivals_table" cellspacing="0" width="100%">
      <thead>
        <tr>
          <th class="col-md-1 scheduled">Scheduled</th>
          <th class="col-md-1 origin">From</th>
          <th class="col-md-3 ident">Flight</th>
          <th class="col-md-1 terminal">Terminal</th>
          <th class="col-md-2 flightstatus">Status</th>
        </tr>
      </thead>
      <tbody>
        {% for flight in flights.data %}
          <tr>
            <td class="scheduled">{{ flight.scheduledTimestamp }}</td>
            <td class="origin">{{ flight.city }}</td>
            <td class="ident">{{ flight.flightNumber }}</a></td>
            <td class="terminal">{{ flight.terminalId }}</td>
            <td class="flightstatus">{{ flight.flightOutputStatus }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% elif operation == 'departures' %}
    <table class="table table-striped table-bordered" id="departures_table" cellspacing="0" width="100%">
      <thead>
        <tr>
          <th class="col-md-1 scheduled">Scheduled</th>
          <th class="col-md-1 destination">To</th>
          <th class="col-md-3 ident">Flight</th>
          <th class="col-md-1 terminal">Terminal</th>
          <th class="col-md-2 flightstatus">Status</th>
        </tr>
      </thead>
      <tbody>
        {% for flight in flights.data %}
          <tr>
            <td class="scheduled">{{ flight.scheduledTimestamp }}</td>
            <td class="origin">{{ flight.city }}</td>
            <td class="ident">{{ flight.flightNumber }}</a></td>
            <td class="terminal">{{ flight.terminalId }}</td>
            <td class="flightstatus">{{ flight.flightOutputStatus }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% endif %}
{% endblock %}

{% block extra_js %}
  <script type="text/javascript">
    $('#arrivals_table').DataTable({
      'order': [],
      "lengthMenu": [ [10, 25, 50, -1], [10, 25, 50, "All"] ],
      'pageLength': 50,
    });
    $('#departures_table').DataTable({
      'order': [],
      "lengthMenu": [ [10, 25, 50, -1], [10, 25, 50, "All"] ],
      'pageLength': 50
    });
  </script>
{% endblock %}
