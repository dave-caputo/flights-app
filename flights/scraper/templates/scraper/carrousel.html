{% extends "home/home_page.html" %}

{% load data_extras %}
{% load wagtailcore_tags %}

{% block flight_type %}
  <h2><strong>CARROUSEL</strong></h2>
  <a href="/"><p>Back</p></a>
  <br />
  <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
    <!-- Indicators -->
    <ol class="carousel-indicators">
      <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
      <li data-target="#carousel-example-generic" data-slide-to="1"></li>
      <li data-target="#carousel-example-generic" data-slide-to="2"></li>
      <li data-target="#carousel-example-generic" data-slide-to="3"></li>
    </ol>

    <!-- Wrapper for slides -->
    <div class="carousel-inner" role="listbox">
      <div class="item active">
        <div>
          <h1>Heathrow Departures</h1>
          <table class="table table-striped table-bordered" id="heathrow_departures_table" cellspacing="0" width="100%">
            <thead>
              <tr>
                <th>Flight</th>
                <th>Airline Name</th>
                <th>Terminal</th>
                <th>Destination</th>
                <th>Status</th>
                <th>Departure Time</th>
              </tr>
            </thead>
            <tfoot>
              <tr>
                <th>Flight</th>
                <th>Airline Name</th>
                <th>Terminal</th>
                <th>Destination</th>
                <th>Status</th>
                <th>Departure Time</th>
              </tr>
            </tfoot>
          </table>
        </div>
      </div>
      <div class="item">
        <div>
          <h1>Heathrow Arrivals</h1>
          <table class="table table-striped table-bordered" id="heathrow_arrivals_table" cellspacing="0" width="100%">
            <thead>
              <tr>
                <th>Flight</th>
                <th>Airline Name</th>
                <th>Terminal</th>
                <th>Destination</th>
                <th>Status</th>
                <th>Arrival Time</th>
              </tr>
            </thead>
            <tfoot>
              <tr>
                <th>Flight</th>
                <th>Airline Name</th>
                <th>Terminal</th>
                <th>Destination</th>
                <th>Status</th>
                <th>Arrival Time</th>
              </tr>
            </tfoot>
          </table>
       </div>
      </div>
      <div class="item">
        <div>
          <h1>Gatwick Departures</h1>
          <table class="table table-striped table-bordered" id="gatwick_departures_table" cellspacing="0" width="100%">
            <thead>
              <tr>
                <th>Flight</th>
                <th>Airline Name</th>
                <th>Terminal</th>
                <th>Destination</th>
                <th>Status</th>
                <th>Departure Time</th>
              </tr>
            </thead>
            <tfoot>
              <tr>
                <th>Flight</th>
                <th>Airline Name</th>
                <th>Terminal</th>
                <th>Destination</th>
                <th>Status</th>
                <th>Departure Time</th>
              </tr>
            </tfoot>
          </table>
       </div>
      </div>
      <div class="item">
        <div>
          <h1>Gatwick Arrivals</h1>
          <table class="table table-striped table-bordered" id="gatwick_arrivals_table" cellspacing="0" width="100%">
            <thead>
              <tr>
                <th>Flight</th>
                <th>Airline Name</th>
                <th>Terminal</th>
                <th>Origin</th>
                <th>Status</th>
                <th>Arrival Time</th>
              </tr>
            </thead>
            <tfoot>
              <tr>
                <th>Flight</th>
                <th>Airline Name</th>
                <th>Terminal</th>
                <th>Origin</th>
                <th>Status</th>
                <th>Arrival Time</th>
              </tr>
            </tfoot>
          </table>
       </div>
      </div>
      <div class="item">
        <h1>Placeholder for advertisement.</h1>
      </div>
    </div>

    <!-- Controls -->
    <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
      <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
      <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>
{% endblock %}

{% block extra_js %}
<script type="text/javascript">
  $('#heathrow_departures_table').DataTable({
      "ajax": "{% url 'scraper:carousel_flights' airport='heathrow' operation='departures' %}",
      "pageLength": 30,
      "columns": [
        {"data": "flightNumber"},
        {"data": "airlineName"},
        {"data": "terminalId"},
        {"data": "city"},
        {"data": "flightStatusText"},
        {"data": "flightStatusTime"},
      ],
      "searching": false,
      "lengthChange": false
  });
  $('#heathrow_arrivals_table').DataTable({
      "ajax": "{% url 'scraper:carousel_flights' airport='heathrow' operation='arrivals' %}",
      "pageLength": 30,
      "columns": [
        {"data": "flightNumber"},
        {"data": "airlineName"},
        {"data": "terminalId"},
        {"data": "city"},
        {"data": "flightStatusText"},
        {"data": "flightStatusTime"},
      ],
      "searching": false,
      "lengthChange": false
  });
  $('#gatwick_departures_table').DataTable({
      "ajax": "{% url 'scraper:carousel_flights' airport='gatwick' operation='departures' %}",
      "pageLength": 30,
      "columns": [
        {"data": "flightNumber"},
        {"data": "airlineName"},
        {"data": "terminalId"},
        {"data": "city"},
        {"data": "flightStatusText"},
        {"data": "flightStatusTime"},
      ],
      "searching": false,
      "lengthChange": false
  });
  $('#gatwick_arrivals_table').DataTable({
      "ajax": "{% url 'scraper:carousel_flights' airport='gatwick' operation='arrivals' %}",
      "pageLength": 30,
      "columns": [
        {"data": "flightNumber"},
        {"data": "airlineName"},
        {"data": "terminalId"},
        {"data": "city"},
        {"data": "flightStatusText"},
        {"data": "flightStatusTime"},
      ],
      "searching": false,
      "lengthChange": false
  });
</script>
{% endblock %}
